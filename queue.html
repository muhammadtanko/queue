<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Guest Waiting List</title>
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body class="bg-gray-100 p-6">
    <!-- Grid of Cards -->
    <div
      id="guestGrid"
      class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"
    >
      <!-- Example Card -->
      <div
        id="guest-1"
        class="bg-white shadow-lg rounded-lg p-4 flex items-center space-x-4"
      >
        <img
          class="w-16 h-16 rounded-full"
          src="https://i.pravatar.cc/300"
          alt="Avatar"
        />
        <div>
          <h2 class="text-xl font-semibold">John Doe</h2>
          <p class="text-gray-500">ID: 1</p>
          <p class="text-gray-500">Phone Number: 070332423543</p>
          <p class="text-gray-500">
            Address: Kaduna state University, Kaduna state, Nigeria
          </p>
        </div>
      </div>
      <div
        id="guest-2"
        class="bg-white shadow-lg rounded-lg p-4 flex items-center space-x-4"
      >
        <img
          class="w-16 h-16 rounded-full"
          src="https://i.pravatar.cc/300"
          alt="Avatar"
        />
        <div>
          <h2 class="text-xl font-semibold">John Doe</h2>
          <p class="text-gray-500">ID: 2</p>
        </div>
      </div>
      <!-- *** -->
      <div
        id="guest-3"
        class="bg-white shadow-lg rounded-lg p-4 flex items-center space-x-4"
      >
        <img
          class="w-16 h-16 rounded-full"
          src="https://i.pravatar.cc/300"
          alt="Avatar"
        />
        <div>
          <h2 class="text-xl font-semibold">John Doe</h2>
          <p class="text-gray-500">ID: 3</p>
        </div>
      </div>
      <div
        id="guest-4"
        class="bg-white shadow-lg rounded-lg p-4 flex items-center space-x-4"
      >
        <img
          class="w-16 h-16 rounded-full"
          src="https://i.pravatar.cc/300"
          alt="Avatar"
        />
        <div>
          <h2 class="text-xl font-semibold">John Doe</h2>
          <p class="text-gray-500">ID: 4</p>
        </div>
      </div>
      <div
        id="guest-5"
        class="bg-white shadow-lg rounded-lg p-4 flex items-center space-x-4"
      >
        <img
          class="w-16 h-16 rounded-full"
          src="https://i.pravatar.cc/300"
          alt="Avatar"
        />
        <div>
          <h2 class="text-xl font-semibold">John Doe</h2>
          <p class="text-gray-500">ID: 5</p>
        </div>
      </div>
      <div
        id="guest-6"
        class="bg-white shadow-lg rounded-lg p-4 flex items-center space-x-4"
      >
        <img
          class="w-16 h-16 rounded-full"
          src="https://i.pravatar.cc/300"
          alt="Avatar"
        />
        <div>
          <h2 class="text-xl font-semibold">John Doe</h2>
          <p class="text-gray-500">ID: 6</p>
        </div>
      </div>
      <!-- Add more cards similarly with unique IDs -->
    </div>

    <!-- Modal -->
    <div
      id="guestModal"
      class="fixed inset-0 bg-black bg-opacity-50 hidden flex items-center justify-center z-50"
    >
      <div class="bg-white rounded-lg p-6 w-full max-w-xl shadow-lg h-[500px]">
        <div id="modalContent">
          <!-- Modal content will be injected here -->
        </div>
      </div>
    </div>

    <script>
      const socket = new WebSocket("ws://localhost:8080");

      socket.onmessage = function (event) {
        const guestId = event.data; // Assuming the socket sends only the ID
        const guestCard = document.getElementById(`guest-${guestId}`);

        if (guestCard) {
          // Show Modal
          showModal(guestCard);

          // Remove Card after 10 seconds
          setTimeout(() => {
            guestCard.remove();
            closeModal();
          }, 10000);
        }
      };

      function showModal(guestCard) {
        const modal = document.getElementById("guestModal");
        const modalContent = document.getElementById("modalContent");

        // Clone and insert guest card into modal
        modalContent.innerHTML = guestCard.innerHTML;
        modal.classList.remove("hidden");
      }

      function closeModal() {
        const modal = document.getElementById("guestModal");
        modal.classList.add("hidden");
      }
    </script>
  </body>
</html>
